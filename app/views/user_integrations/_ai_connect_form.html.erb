<%= form_with url: url, model: user_integration do |f| %>
  <%= content_tag :div, class: 'fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-400 bg-white p-6 shadow-lg duration-200 rounded-md' do %>
    <%= content_tag :div, class: 'flex flex-col space-y-1.5 text-center sm:text-left' do %>
      <%= content_tag :h2, title, class: 'text-lg font-semibold leading-none tracking-tight' %>
      <%= content_tag :p, description, class: 'text-sm text-gray-500' %>
    <% end %>

    <%= content_tag :div, class: 'grid gap-4 py-4' do %>
      <%= content_tag :div, class: 'grid' do %>
        <%= f.label :access_token %>
        <%= f.password_field :access_token %>
      <% end %>

      <%= content_tag :div, class: 'grid' do %>
        <%= f.label :active_chat_id, 'Active Chat' %>
        <%= f.select :active_chat_id,
          options_for_select(@chat_models, user_integration.active_chat_id),
          { include_blank: 'Select a chat model' },
          class: 'bg-white p-2 rounded-md font-medium text-sm border border-gray-400 hover:bg-gray-100 w-full sm:w-auto',
          required: true %>
      <% end %>

      <%= content_tag :div, class: 'grid' do %>
        <%= f.label :active_embedding_id, 'Active Embedding' %>
        <%= f.select :active_embedding_id,
          options_for_select(@embedding_models, user_integration.active_embedding_id),
          { include_blank: 'Select an embedding model' },
          class: 'bg-white p-2 rounded-md font-medium text-sm border border-gray-400 hover:bg-gray-100 w-full sm:w-auto',
          required: true %>
      <% end %>

    <%= content_tag :div, class: 'flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2' do %>
      <%= button_tag 'Cancel', type: 'button', class: 'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium border border-gray-400 bg-white hover:bg-gray-100 h-10 px-4 py-2 cursor-pointer', data: { action: 'modal#hideModal' } %>
      <%= f.submit submit_text, class: 'btn-primary' %>
    <% end %>

    <%= button_tag type: 'button', class: 'absolute right-4 top-4 rounded-sm text-gray-600 hover:text-emerald-600 hover:bg-gray-50 cursor-pointer', data: { action: 'modal#hideModal' } do %>
      <%= icon 'x-mark' %>
    <% end %>
  <% end %>
<% end %>
<% end %>